<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • dbplyr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">dbplyr</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/dbplyr.html">Intro</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/sql-translation.html">SQL translation</a>
    </li>
    <li>
      <a href="../articles/new-backend.html">Creating new backends</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/dbplyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">

  <div class="col-md-9">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/tidyverse/dbplyr/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div class="contents">
    <div id="dbplyr-1-2-1-9000" class="section level1">
<h1 class="page-header">
<a href="#dbplyr-1-2-1-9000" class="anchor"></a>dbplyr 1.2.1.9000<small> Unreleased </small>
</h1>
<ul>
<li>Redshift <code>substr()</code> compatibility issue resolved (<a href='https://github.com/tidyverse/dbplyr/issues/3339'>#3339</a>)</li>
</ul>
</div>
    <div id="dbplyr-1-2-1" class="section level1">
<h1 class="page-header">
<a href="#dbplyr-1-2-1" class="anchor"></a>dbplyr 1.2.1<small> 2018-02-19 </small>
</h1>
<ul>
<li>Forward compatibility fixes for rlang 0.2.0</li>
</ul>
</div>
    <div id="dbplyr-1-2-0" class="section level1">
<h1 class="page-header">
<a href="#dbplyr-1-2-0" class="anchor"></a>dbplyr 1.2.0<small> 2018-01-03 </small>
</h1>
<div id="new-top-level-translations" class="section level2">
<h2 class="hasAnchor">
<a href="#new-top-level-translations" class="anchor"></a>New top-level translations</h2>
<ul>
<li>
<p>New translations for</p>
<ul>
<li>MS Access (<a href='https://github.com/tidyverse/dbplyr/issues/2946'>#2946</a>) (<a href='http://github.com/DavisVaughan'>@DavisVaughan</a>)</li>
<li>Oracle, via odbc or ROracle (<a href='https://github.com/tidyverse/dbplyr/issues/2928'>#2928</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2732'>#2732</a>, <a href='http://github.com/edgararuiz'>@edgararuiz</a>)</li>
<li>Teradata.</li>
<li>Redshift.</li>
</ul>
</li>
<li><p>dbplyr now supplies appropriate translations for the RMariaDB and RPostgres packages (<a href='https://github.com/tidyverse/dbplyr/issues/3154'>#3154</a>). We generally recommend using these packages in favour of the older RMySQL and RPostgreSQL packages as they are fully DBI compliant and tested with DBItest.</p></li>
</ul>
</div>
<div id="new-features" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New features</h2>
<ul>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> can now “copy” tbl_sql in the same src, providing another way to cache a query into a temporary table (<a href='https://github.com/tidyverse/dbplyr/issues/3064'>#3064</a>). You can also <code>copy_to</code> tbl_sqls from another source, and <code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> will automatically collect then copy.</p></li>
<li><p>Initial support for stringr functions: <code>str_length()</code>, <code>str_to_upper()</code>, <code>str_to_lower()</code>, <code>str_replace_all()</code>, <code>str_detect()</code>, <code>str_trim()</code>. Regular expression support varies from database to database, but most simple regular expressions should be ok.</p></li>
</ul>
</div>
<div id="tools-for-developers" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-developers" class="anchor"></a>Tools for developers</h2>
<ul>
<li><p><code><a href="../reference/db_copy_to.html">db_compute()</a></code> gains an <code>analyze</code> argument to match <code><a href="../reference/db_copy_to.html">db_copy_to()</a></code>.</p></li>
<li><p>New <code><a href="../reference/remote_name.html">remote_name()</a></code>, <code><a href="../reference/remote_name.html">remote_con()</a></code>, <code><a href="../reference/remote_name.html">remote_src()</a></code>, <code><a href="../reference/remote_name.html">remote_query()</a></code> and <code><a href="../reference/remote_name.html">remote_query_plan()</a></code> provide a standard API for get metadata about a remote tbl (<a href='https://github.com/tidyverse/dbplyr/issues/3130'>#3130</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2923'>#2923</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2824'>#2824</a>).</p></li>
<li><p>New <code><a href="../reference/sql_expr.html">sql_expr()</a></code> is a more convenient building block for low-level SQL translation (<a href='https://github.com/tidyverse/dbplyr/issues/3169'>#3169</a>).</p></li>
<li><p>New <code><a href="../reference/sql_variant.html">sql_aggregate()</a></code> and <code><a href="../reference/win_over.html">win_aggregate()</a></code> for generating SQL and windowed SQL functions for aggregates. These take one argument, <code>x</code>, and warn if <code>na.rm</code> is not <code>TRUE</code> (<a href='https://github.com/tidyverse/dbplyr/issues/3155'>#3155</a>). <code><a href="../reference/win_over.html">win_recycled()</a></code> is equivalent to <code><a href="../reference/win_over.html">win_aggregate()</a></code> and has been soft-deprecated.</p></li>
<li><p><code>db_write_table</code> now needs to return the table name</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes" class="anchor"></a>Minor improvements and bug fixes</h2>
<ul>
<li><p>Multiple <code>head()</code> calls in a row now collapse to a single call. This avoids a printing problem with MS SQL (<a href='https://github.com/tidyverse/dbplyr/issues/3084'>#3084</a>).</p></li>
<li><p><code><a href="../reference/escape.html">escape()</a></code> now works with integer64 values from the bit64 package (<a href='https://github.com/tidyverse/dbplyr/issues/3230'>#3230</a>)</p></li>
<li><p><code>if</code>, <code>ifelse()</code>, and <code><a href="http://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> now correctly scope the false condition so that it only applies to non-NULL conditions (<a href='https://github.com/tidyverse/dbplyr/issues/3157'>#3157</a>)</p></li>
<li><p><code><a href="../reference/ident.html">ident()</a></code> and <code><a href="../reference/ident.html">ident_q()</a></code> handle 0-length inputs better, and should be easier to use with S3 (<a href='https://github.com/tidyverse/dbplyr/issues/3212'>#3212</a>)</p></li>
<li><p><code><a href="../reference/in_schema.html">in_schema()</a></code> should now work in more places, particularly in <code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> (<a href='https://github.com/tidyverse/dbplyr/issues/3013'>#3013</a>, <a href='http://github.com/baileych'>@baileych</a>)</p></li>
<li><p>SQL generation for joins no longer gets stuck in a endless loop if you request an empty suffix (<a href='https://github.com/tidyverse/dbplyr/issues/3220'>#3220</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> has better logic for splitting a single mutate into multiple subqueries (<a href='https://github.com/tidyverse/dbplyr/issues/3095'>#3095</a>).</p></li>
<li><p>Improved <code>paste()</code> and <code>paste0()</code> support in MySQL, PostgreSQL (<a href='https://github.com/tidyverse/dbplyr/issues/3168'>#3168</a>), and RSQLite (<a href='https://github.com/tidyverse/dbplyr/issues/3176'>#3176</a>). MySQL and PostgreSQL gain support for <code>str_flatten()</code> which behaves like <code>paste(x, collapse = "-")</code> (but for technical reasons can’t be implemented as a straightforward translation of <code>paste()</code>).</p></li>
<li><p><code>same_src.tbl_sql()</code> now performs correct comparison instead of always returning <code>TRUE</code>. This means that <code>copy = TRUE</code> once again allows you to perform cross-database joins (<a href='https://github.com/tidyverse/dbplyr/issues/3002'>#3002</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/select.html">select()</a></code> queries no longer alias column names unnecessarily (<a href='https://github.com/tidyverse/dbplyr/issues/2968'>#2968</a>, <a href='http://github.com/DavisVaughan'>@DavisVaughan</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/select.html">select()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/select.html">rename()</a></code> are now powered by tidyselect, fixing a few renaming bugs (<a href='https://github.com/tidyverse/dbplyr/issues/3132'>#3132</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2943'>#2943</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2860'>#2860</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> once again performs partial evaluation before database submission (<a href='https://github.com/tidyverse/dbplyr/issues/3148'>#3148</a>).</p></li>
<li><p><code>test_src()</code> makes it easier to access a single test source.</p></li>
</ul>
</div>
<div id="database-specific-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#database-specific-improvements" class="anchor"></a>Database specific improvements</h2>
<ul>
<li>
<p>MS SQL</p>
<ul>
<li><p>Better support for temporary tables (<a href='http://github.com/Hong'>@Hong</a>-Revo)</p></li>
<li><p>Different translations for filter/mutate contexts for: <code>NULL</code> evaluation (<code>is.na()</code>, <code>is.null()</code>), logical operators (<code>!</code>, <code>&amp;</code>, <code>&amp;&amp;</code>, <code>|</code>, <code>||</code>), and comparison operators (<code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>)</p></li>
</ul>
</li>
<li><p>MySQL: <code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> (via <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_write_table()</a></code>) correctly translates logical variables to integers (<a href='https://github.com/tidyverse/dbplyr/issues/3151'>#3151</a>).</p></li>
<li><p>odbc: improved <code><a href="http://dplyr.tidyverse.org/reference/n.html">n()</a></code> translation in windowed context.</p></li>
<li><p>SQLite: improved <code>na_if</code> translation (<a href='http://github.com/cwarden'>@cwarden</a>)</p></li>
<li><p>PostgreSQL: translation for <code>grepl()</code> added (<a href='http://github.com/zozlak'>@zozlak</a>)</p></li>
</ul>
</div>
</div>
    <div id="dbplyr-1-1-0" class="section level1">
<h1 class="page-header">
<a href="#dbplyr-1-1-0" class="anchor"></a>dbplyr 1.1.0<small> 2017-06-27 </small>
</h1>
<div id="new-features-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New features</h2>
<ul>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/join.html">full_join()</a></code> over non-overlapping columns <code>by = character()</code> translated to <code>CROSS JOIN</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2924'>#2924</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> now translates to SQL “CASE WHEN” (<a href='https://github.com/tidyverse/dbplyr/issues/2894'>#2894</a>)</p></li>
<li><p><code>x %in% c(1)</code> now generates the same SQL as <code>x %in% 1</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2898'>#2898</a>).</p></li>
<li><p>New <code><a href="../reference/window_order.html">window_order()</a></code> and <code><a href="../reference/window_order.html">window_frame()</a></code> give you finer control over the window functions that dplyr creates (<a href='https://github.com/tidyverse/dbplyr/issues/2874'>#2874</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2593'>#2593</a>).</p></li>
<li><p>Added SQL translations for Oracle (<a href='http://github.com/edgararuiz'>@edgararuiz</a>).</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes-1" class="anchor"></a>Minor improvements and bug fixes</h2>
<ul>
<li><p><code>x %in% c(1)</code> now generates the same SQL as <code>x %in% 1</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2898'>#2898</a>).</p></li>
<li><p><code>head(tbl, 0)</code> is now supported (<a href='https://github.com/tidyverse/dbplyr/issues/2863'>#2863</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/select.html">select()</a></code>ing zero columns gives a more information error message (<a href='https://github.com/tidyverse/dbplyr/issues/2863'>#2863</a>).</p></li>
<li><p>Variables created in a join are now disambiguated against other variables in the same table, not just variables in the other table (<a href='https://github.com/tidyverse/dbplyr/issues/2823'>#2823</a>).</p></li>
<li><p>PostgreSQL gains a better translation for <code>round()</code> (<a href='https://github.com/tidyverse/dbplyr/issues/60'>#60</a>).</p></li>
<li><p>Added custom <code>db_analyze_table()</code> for MS SQL, Oracle, Hive and Impala (<a href='http://github.com/edgararuiz'>@edgararuiz</a>)</p></li>
<li><p>Added support for <code>sd()</code> for aggregate and window functions (<a href='https://github.com/tidyverse/dbplyr/issues/2887'>#2887</a>) (<a href='http://github.com/edgararuiz'>@edgararuiz</a>)</p></li>
<li><p>You can now use the magrittr pipe within expressions, e.g. <code><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate(mtcars, cyl %&gt;% as.character())</a></code>.</p></li>
<li><p>If a translation was supplied for a summarise function, but not for the equivalent windowed variant, the expression would be translated to <code>NULL</code> with a warning. Now <code><a href="../reference/sql_variant.html">sql_variant()</a></code> checks that all aggregate functions have matching window functions so that correct translations or clean errors will be generated (<a href='https://github.com/tidyverse/dbplyr/issues/2887'>#2887</a>)</p></li>
</ul>
</div>
</div>
    <div id="dbplyr-1-0-0" class="section level1">
<h1 class="page-header">
<a href="#dbplyr-1-0-0" class="anchor"></a>dbplyr 1.0.0<small> 2017-06-09 </small>
</h1>
<div id="new-features-2" class="section level2">
<h2 class="hasAnchor">
<a href="#new-features-2" class="anchor"></a>New features</h2>
<ul>
<li>
<p><code><a href="http://dplyr.tidyverse.org/reference/tbl.html">tbl()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> now work directly with DBI connections (<a href='https://github.com/tidyverse/dbplyr/issues/2423'>#2423</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2576'>#2576</a>), so there is no longer a need to generate a dplyr src.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">con &lt;-<span class="st"> </span>DBI<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/DBI/topics/dbConnect">dbConnect</a></span>(RSQLite<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RSQLite/topics/SQLite">SQLite</a></span>(), <span class="st">":memory:"</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to</a></span>(con, mtcars)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">mtcars2 &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/tbl.html">tbl</a></span>(con, <span class="st">"mtcars"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">mtcars2</a></code></pre></div>
</li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse()</a></code> now works with remote tables (<a href='https://github.com/tidyverse/dbplyr/issues/2665'>#2665</a>)</p></li>
<li><p>dplyr has gained a basic SQL optimiser, which collapses certain nested SELECT queries into a single query (<a href='https://github.com/tidyverse/dbplyr/issues/1979'>#1979</a>). This will improve query execution performance for databases with less sophisticated query optimisers, and fixes certain problems with ordering and limits in subqueries (<a href='https://github.com/tidyverse/dbplyr/issues/1979'>#1979</a>). A big thanks goes to <a href='http://github.com/hhoeflin'>@hhoeflin</a> for figuring out this optimisation.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/compute.html">compute()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/compute.html">collapse()</a></code> now preserve the “ordering” of rows. This only affects the computation of window functions, as the rest of SQL does not care about row order (<a href='https://github.com/tidyverse/dbplyr/issues/2281'>#2281</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> gains an <code>overwrite</code> argument which allows you to overwrite an existing table. Use with care! (<a href='https://github.com/tidyverse/dbplyr/issues/2296'>#2296</a>)</p></li>
<li><p>New <code><a href="../reference/in_schema.html">in_schema()</a></code> function makes it easy to refer to tables in schema: <code><a href="../reference/in_schema.html">in_schema("my_schema_name", "my_table_name")</a></code>.</p></li>
</ul>
</div>
<div id="deprecated-and-defunct" class="section level2">
<h2 class="hasAnchor">
<a href="#deprecated-and-defunct" class="anchor"></a>Deprecated and defunct</h2>
<ul>
<li>
<code>query()</code> is no longer exported. It hasn’t been useful for a while so this shouldn’t break any code.</li>
</ul>
</div>
<div id="verb-level-sql-generation" class="section level2">
<h2 class="hasAnchor">
<a href="#verb-level-sql-generation" class="anchor"></a>Verb-level SQL generation</h2>
<ul>
<li><p>Partial evaluation occurs immediately when you execute a verb (like <code><a href="http://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> or <code><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>) rather than happening when the query is executed (<a href='https://github.com/tidyverse/dbplyr/issues/2370'>#2370</a>).</p></li>
<li><p><code>mutate.tbl_sql()</code> will now generate as many subqueries as necessary so that you can refer to variables that you just created (like in mutate with regular dataframes) (<a href='https://github.com/tidyverse/dbplyr/issues/2481'>#2481</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2483'>#2483</a>).</p></li>
<li>
<p>SQL joins have been improved:</p>
<ul>
<li><p>SQL joins always use the <code>ON ...</code> syntax, avoiding <code>USING ...</code> even for natural joins. Improved handling of tables with columns of the same name (<a href='https://github.com/tidyverse/dbplyr/issues/1997'>#1997</a>, <a href='http://github.com/javierluraschi'>@javierluraschi</a>). They now generate SQL more similar to what you’d write by hand, eliminating a layer or two of subqueries (<a href='https://github.com/tidyverse/dbplyr/issues/2333'>#2333</a>)</p></li>
<li><p>[API] They now follow the same rules for including duplicated key variables that the data frame methods do, namely that key variables are only kept from <code>x</code>, and never from <code>y</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2410'>#2410</a>)</p></li>
<li><p>[API] The <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">sql_join()</a></code> generic now gains a <code>vars</code> argument which lists the variables taken from the left and right sides of the join. If you have a custom <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">sql_join()</a></code> method, you’ll need to update how your code generates joins, following the template in <code>sql_join.generic()</code>.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/join.html">full_join()</a></code> throws a clear error when you attempt to use it with a MySQL backend (<a href='https://github.com/tidyverse/dbplyr/issues/2045'>#2045</a>)</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/join.html">right_join()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/join.html">full_join()</a></code> now return results consistent with local data frame sources when there are records in the right table with no match in the left table. <code><a href="http://dplyr.tidyverse.org/reference/join.html">right_join()</a></code> returns values of <code>by</code> columns from the right table. <code><a href="http://dplyr.tidyverse.org/reference/join.html">full_join()</a></code> returns coalesced values of <code>by</code> columns from the left and right tables (<a href='https://github.com/tidyverse/dbplyr/issues/2578'>#2578</a>, <a href='http://github.com/ianmcook'>@ianmcook</a>)</p></li>
</ul>
</li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> can now perform an inline mutate for database backends (<a href='https://github.com/tidyverse/dbplyr/issues/2422'>#2422</a>).</p></li>
<li>
<p>The SQL generation set operations (<code><a href="http://dplyr.tidyverse.org/reference/setops.html">intersect()</a></code>, <code><a href="http://dplyr.tidyverse.org/reference/setops.html">setdiff()</a></code>, <code><a href="http://dplyr.tidyverse.org/reference/setops.html">union()</a></code>, and <code><a href="http://dplyr.tidyverse.org/reference/setops.html">union_all()</a></code>) have been considerably improved.</p>
<p>By default, the component SELECT are surrounded with parentheses, except on SQLite. The SQLite backend will now throw an error if you attempt a set operation on a query that contains a LIMIT, as that is not supported in SQLite (<a href='https://github.com/tidyverse/dbplyr/issues/2270'>#2270</a>).</p>
<p>All set operations match column names across inputs, filling in non-matching variables with NULL (<a href='https://github.com/tidyverse/dbplyr/issues/2556'>#2556</a>).</p>
</li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/select.html">rename()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> now combine correctly (<a href='https://github.com/tidyverse/dbplyr/issues/1962'>#1962</a>)</p></li>
<li><p><code><a href="../reference/tbl_lazy.html">tbl_lazy()</a></code> and <code>lazy_tbl()</code> have been exported. These help you test generated SQL with out an active database connection.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code> correctly resets grouping variables (<a href='https://github.com/tidyverse/dbplyr/issues/2704'>#2704</a>).</p></li>
</ul>
</div>
<div id="vector-level-sql-generation" class="section level2">
<h2 class="hasAnchor">
<a href="#vector-level-sql-generation" class="anchor"></a>Vector-level SQL generation</h2>
<ul>
<li><p>New <code><a href="../reference/sql.html">as.sql()</a></code> safely coerces an input to SQL.</p></li>
<li><p>More tranlators for <code>as.character()</code>, <code>as.integer()</code> and <code>as.double()</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2775'>#2775</a>).</p></li>
<li><p>New <code><a href="../reference/ident.html">ident_q()</a></code> makes it possible to specifier identifiers that do not need to be quoted.</p></li>
<li>
<p>Translation of inline scalars:</p>
<ul>
<li><p>Logical values are now translated differently depending on the backend. The default is to use “true” and “false” which is the SQL-99 standard, but not widely support. SQLite translates to “0” and “1” (<a href='https://github.com/tidyverse/dbplyr/issues/2052'>#2052</a>).</p></li>
<li><p><code>Inf</code> and <code>-Inf</code> are correctly escaped</p></li>
<li><p>Better test for whether or not a double is similar to an integer and hence needs a trailing 0.0 added (<a href='https://github.com/tidyverse/dbplyr/issues/2004'>#2004</a>).</p></li>
<li><p>Quoting defaults to <code>DBI::dbEscapeString()</code> and <code><a href="http://www.rdocumentation.org/packages/DBI/topics/dbQuoteIdentifier">DBI::dbQuoteIdentifier()</a></code> respectively.</p></li>
</ul>
</li>
<li><p><code>::</code> and <code>:::</code> are handled correctly (<a href='https://github.com/tidyverse/dbplyr/issues/2321'>#2321</a>)</p></li>
<li><p><code>x %in% 1</code> is now correctly translated to <code>x IN (1)</code> (<a href='https://github.com/tidyverse/dbplyr/issues/511'>#511</a>).</p></li>
<li><p><code>ifelse()</code> and <code><a href="http://dplyr.tidyverse.org/reference/if_else.html">if_else()</a></code> use correct argument names in SQL translation (<a href='https://github.com/tidyverse/dbplyr/issues/2225'>#2225</a>).</p></li>
<li><p><code><a href="../reference/ident.html">ident()</a></code> now returns an object with class <code>c("ident", "character")</code>. It no longer contains “sql” to indicate that this is not already escaped.</p></li>
<li><p><code>is.na()</code> and <code>is.null()</code> gain extra parens in SQL translation to preserve correct precedence (<a href='https://github.com/tidyverse/dbplyr/issues/2302'>#2302</a>).</p></li>
<li><p>[API] <code>log(x, b)</code> is now correctly translated to the SQL <code>log(b, x)</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2288'>#2288</a>). SQLite does not support the 2-argument log function so it is translated to <code>log(x) / log(b)</code>.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/nth.html">nth(x, i)</a></code> is now correctly translated to <code>nth_value(x, i)</code>.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/n_distinct.html">n_distinct()</a></code> now accepts multiple variables (<a href='https://github.com/tidyverse/dbplyr/issues/2148'>#2148</a>).</p></li>
<li><p>[API] <code>substr()</code> is now translated to SQL, correcting for the difference in the third argument. In R, it’s the position of the last character, in SQL it’s the length of the string (<a href='https://github.com/tidyverse/dbplyr/issues/2536'>#2536</a>).</p></li>
<li><p><code><a href="../reference/win_over.html">win_over()</a></code> escapes expression using current database rules.</p></li>
</ul>
</div>
<div id="backends" class="section level2">
<h2 class="hasAnchor">
<a href="#backends" class="anchor"></a>Backends</h2>
<ul>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> now uses <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_write_table()</a></code> instead of <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_create_table()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_insert_into()</a></code>. <code>db_write_table.DBIConnection()</code> uses <code>dbWriteTable()</code>.</p></li>
<li><p>New <code><a href="../reference/db_copy_to.html">db_copy_to()</a></code>, <code><a href="../reference/db_copy_to.html">db_compute()</a></code> and <code><a href="../reference/db_copy_to.html">db_collect()</a></code> allow backends to override the entire database process behind <code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code>, <code><a href="http://dplyr.tidyverse.org/reference/compute.html">compute()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/compute.html">collect()</a></code>. <code><a href="../reference/db_copy_to.html">db_sql_render()</a></code> allow additional control over the SQL rendering process.</p></li>
<li><p>All generics whose behaviour can vary from database to database now provide a DBIConnection method. That means that you can easily scan the NAMESPACE to see the extension points.</p></li>
<li><p><code><a href="../reference/sql_escape_logical.html">sql_escape_logical()</a></code> allows you to control the translation of literal logicals (<a href='https://github.com/tidyverse/dbplyr/issues/2614'>#2614</a>).</p></li>
<li><p><code>src_desc()</code> has been replaced by <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_desc()</a></code> and now dispatches on the connection, eliminating the last method that required dispatch on the class of the src.</p></li>
<li><p><code><a href="../reference/win_over.html">win_over()</a></code>, <code><a href="../reference/win_over.html">win_rank()</a></code>, <code><a href="../reference/win_over.html">win_recycled()</a></code>, <code><a href="../reference/win_over.html">win_cumulative()</a></code>, <code><a href="../reference/win_over.html">win_current_group()</a></code> and <code><a href="../reference/win_over.html">win_current_order()</a></code> are now exported. This should make it easier to provide customised SQL for window functions (<a href='https://github.com/tidyverse/dbplyr/issues/2051'>#2051</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2126'>#2126</a>).</p></li>
<li><p>SQL translation for Microsoft SQL Server (<a href='http://github.com/edgararuiz'>@edgararuiz</a>)</p></li>
<li><p>SQL translation for Apache Hive (<a href='http://github.com/edgararuiz'>@edgararuiz</a>)</p></li>
<li><p>SQL translation for Apache Impala (<a href='http://github.com/edgararuiz'>@edgararuiz</a>)</p></li>
</ul>
</div>
<div id="minor-bug-fixes-and-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-bug-fixes-and-improvements" class="anchor"></a>Minor bug fixes and improvements</h2>
<ul>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/compute.html">collect()</a></code> once again defaults to return all rows in the data (<a href='https://github.com/tidyverse/dbplyr/issues/1968'>#1968</a>). This makes it behave the same as <code>as.data.frame()</code> and <code><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble()</a></code>.</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/compute.html">collect()</a></code> only regroups by variables present in the data (<a href='https://github.com/tidyverse/dbplyr/issues/2156'>#2156</a>)</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/compute.html">collect()</a></code> will automatically LIMIT the result to the <code>n</code>, the number of rows requested. This will provide the query planner with more information that it may be able to use to improve execution time (<a href='https://github.com/tidyverse/dbplyr/issues/2083'>#2083</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/common_by.html">common_by()</a></code> gets a better error message for unexpected inputs (<a href='https://github.com/tidyverse/dbplyr/issues/2091'>#2091</a>)</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> no longer checks that the table doesn’t exist before creation, intead preferring to fall back on the database for error messages. This should reduce both false positives and false negative (<a href='https://github.com/tidyverse/dbplyr/issues/1470'>#1470</a>)</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> now succeeds for MySQL if a character column contains <code>NA</code> (<a href='https://github.com/tidyverse/dbplyr/issues/1975'>#1975</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2256'>#2256</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2263'>#2263</a>, <a href='https://github.com/tidyverse/dbplyr/issues/2381'>#2381</a>, <a href='http://github.com/demorenoc'>@demorenoc</a>, <a href='http://github.com/eduardgrebe'>@eduardgrebe</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/copy_to.html">copy_to()</a></code> now returns it’s output invisibly (since you’re often just calling for the side-effect).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code> reports improved variable information for SQL backends. This means that it is more likely to work in the middle of a pipeline (<a href='https://github.com/tidyverse/dbplyr/issues/2359'>#2359</a>).</p></li>
<li><p>Ungrouped <code><a href="http://dplyr.tidyverse.org/reference/do.html">do()</a></code> on database backends now collects all data locally first (<a href='https://github.com/tidyverse/dbplyr/issues/2392'>#2392</a>).</p></li>
<li><p>Call <code>dbFetch()</code> instead of the deprecated <code>fetch()</code> (<a href='https://github.com/tidyverse/dbplyr/issues/2134'>#2134</a>). Use <code><a href="http://www.rdocumentation.org/packages/DBI/topics/dbExecute">DBI::dbExecute()</a></code> for non-query SQL commands (<a href='https://github.com/tidyverse/dbplyr/issues/1912'>#1912</a>)</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/explain.html">explain()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/explain.html">show_query()</a></code> now invisibly return the first argument, making them easier to use inside a pipeline.</p></li>
<li><p><code>print.tbl_sql()</code> displays ordering (<a href='https://github.com/tidyverse/dbplyr/issues/2287'>#2287</a>) and prints table name, if known.</p></li>
<li><p><code>print(df, n = Inf)</code> and <code>head(df, n = Inf)</code> now work with remote tables (<a href='https://github.com/tidyverse/dbplyr/issues/2580'>#2580</a>).</p></li>
<li><p><code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">db_desc()</a></code> and <code><a href="http://dplyr.tidyverse.org/reference/backend_dbplyr.html">sql_translate_env()</a></code> get defaults for DBIConnection.</p></li>
<li><p>Formatting now works by overriding the <code><a href="http://dplyr.tidyverse.org/reference/reexports.html">tbl_sum()</a></code> generic instead of <code>print()</code>. This means that the output is more consistent with tibble, and that <code>format()</code> is now supported also for SQL sources (tidyverse/dbplyr<a href='https://github.com/tidyverse/dbplyr/issues/14'>#14</a>).</p></li>
</ul>
</div>
<div id="lazy-ops" class="section level2">
<h2 class="hasAnchor">
<a href="#lazy-ops" class="anchor"></a>Lazy ops</h2>
<ul>
<li><p>[API] The signature of <code>op_base</code> has changed to <code><a href="../reference/lazy_ops.html">op_base(x, vars, class)</a></code></p></li>
<li>
<p>[API] <code><a href="../reference/translate_sql.html">translate_sql()</a></code> and <code><a href="../reference/partial_eval.html">partial_eval()</a></code> have been refined:</p>
<ul>
<li><p><code><a href="../reference/translate_sql.html">translate_sql()</a></code> no longer takes a vars argument; instead call <code><a href="../reference/partial_eval.html">partial_eval()</a></code> yourself.</p></li>
<li><p>Because it no longer needs the environment <code>translate_sql()_</code> now works with a list of dots, rather than a <code>lazy_dots</code>.</p></li>
<li><p><code><a href="../reference/partial_eval.html">partial_eval()</a></code> now takes a character vector of variable names rather than a tbl.</p></li>
<li><p>This leads to a simplification of the <code>op</code> data structure: dots is now a list of expressions rather than a <code>lazy_dots</code>.</p></li>
</ul>
</li>
<li><p>[API] <code><a href="../reference/lazy_ops.html">op_vars()</a></code> now returns a list of quoted expressions. This enables escaping to happen at the correct time (i.e. when the connection is known).</p></li>
</ul>
</div>
</div>
    </div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#dbplyr-1-2-1-9000">1.2.1.9000</a></li>
        <li><a href="#dbplyr-1-2-1">1.2.1</a></li>
        <li><a href="#dbplyr-1-2-0">1.2.0</a></li>
        <li><a href="#dbplyr-1-1-0">1.1.0</a></li>
        <li><a href="#dbplyr-1-0-0">1.0.0</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="tidyverse">
  <p>dbplyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Edgar Ruiz, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
  <p>Site built by <a href="http://pkgdown.r-lib.org">pkgdown</a>.</p>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
      </footer>
   </div>

  </body>
</html>

